/*

|--------------------------------------------------------------------------

| 1. Tailwind V4 Unified Import

|--------------------------------------------------------------------------

| This single import includes all base styles (Preflight), components, and utilities.

*/

@import 'tailwindcss';

@config '../tailwind.config.ts';

/*

|--------------------------------------------------------------------------

| 2. Define Custom CSS Variables for Theming (HSL Values)

|--------------------------------------------------------------------------

| These variables are read by the 'hsl(var(--...))' definitions in your

| tailwind.config.ts.

*/

@layer base {
  :root {
    /* -- LIGHT MODE VARIABLES -- */

    --background: 0 0% 100%; /* white */

    --foreground: 222.2 47.4% 11.2%; /* near black */

    --muted: 210 40% 96.1%;

    --muted-foreground: 215.4 16.3% 46.9%;

    --card: 0 0% 100%;

    --card-foreground: 222.2 47.4% 11.2%;

    --border: 214.3 31.8% 91.4%; /* light gray border */

    --input: 214.3 31.8% 91.4%;

    /* Primary (Used for CTA buttons, accents - currently near black/dark blue) */

    --primary: 222.2 47.4% 11.2%;

    --primary-foreground: 210 40% 98%; /* text on primary: white */

    --secondary: 210 40% 96.1%;

    --secondary-foreground: 222.2 47.4% 11.2%;

    --accent: 210 40% 96.1%;

    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;

    --destructive-foreground: 210 40% 98%;

    --ring: 222.2 47.4% 11.2%;

    --radius: 0.5rem; /* Border radius default */
  }

  /*

   * Dark mode is activated when 'next-themes' adds the 'dark' class

   * to the <html> element.

   */

  .dark {
    /* -- DARK MODE VARIABLES -- */

    --background: 222.2 47.4% 11.2%; /* dark navy/near black */

    --foreground: 210 40% 98%; /* near white */

    --muted: 217.2 32.6% 17.5%;

    --muted-foreground: 215 20.2% 65.1%;

    --card: 222.2 47.4% 11.2%;

    --card-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%; /* darker gray border */

    --input: 217.2 32.6% 17.5%;

    /* Primary (Used for CTA buttons - currently near white/light gray) */

    --primary: 210 40% 98%;

    --primary-foreground: 222.2 47.4% 11.2%; /* text on primary: dark navy */

    --secondary: 217.2 32.6% 17.5%;

    --secondary-foreground: 210 40% 98%;

    --accent: 217.2 32.6% 17.5%;

    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;

    --destructive-foreground: 210 40% 98%;

    --ring: 217.2 32.6% 17.5%;
  }
}

/*

|--------------------------------------------------------------------------

| 3. Apply Global Base Styles (Using @apply)

|--------------------------------------------------------------------------

| This applies the primary theme variables to the body and ensures borders

| use the theme color.

*/

@layer base {
  * {
    @apply border-border;
  }

  body {
    /* These apply the theme variables defined in :root or .dark */

    @apply bg-background text-foreground;

    font-family: Arial, Helvetica, sans-serif;
  }

  /* Example: Headings reset (for better control after Preflight) */

  h1,
  h2,
  h3,
  h4 {
    @apply mt-0 mb-2 font-bold;
  }
}

/*
|--------------------------------------------------------------------------
| 4. Prism Syntax Highlighting Styles (THEME AWARE)
|--------------------------------------------------------------------------
*/
@layer components {
  /* Common styles for all code blocks */
  pre[class*='language-'],
  code[class*='language-'] {
    @apply overflow-auto rounded-lg p-4 text-sm;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    line-height: 1.5;
  }

  /* Dark Theme for Code Blocks (Default) */
  pre[class*='language-'] {
    background-color: #272822; /* Dark background */
    color: #f8f8f2; /* Light text */
    border: 1px solid #383a42;
  }

  /* Light Theme Override (When outside .dark) */
  .prose :not(.dark) pre[class*='language-'] {
    background-color: #f5f2f0; /* Light background */
    color: #383a42; /* Dark text */
    border: 1px solid #e0e0e0;
  }

  /* Prism tokens - adjust colors for contrast */
  .token.comment,
  .token.prolog,
  .token.doctype,
  .token.cdata {
    color: #8292a2;
  }
  .token.punctuation {
    color: #f8f8f2;
  }
  .token.namespace {
    opacity: 0.7;
  }
  .token.property,
  .token.tag,
  .token.boolean,
  .token.number,
  .token.constant,
  .token.symbol,
  .token.deleted {
    color: #ae81ff;
  }
  .token.selector,
  .token.attr-name,
  .token.string,
  .token.char,
  .token.builtin,
  .token.inserted {
    color: #a6e22e;
  }
  .token.operator,
  .token.entity,
  .token.url,
  .language-css .token.string,
  .style .token.string,
  .token.variable {
    color: #f8f8f2;
  }
  .token.atrule,
  .token.attr-value,
  .token.keyword {
    color: #f92672;
  }
  .token.function,
  .token.class-name {
    color: #e6db74;
  }
  .token.regex,
  .token.important {
    color: #fd971f;
  }
}

/*
|--------------------------------------------------------------------------
| 5. ToC Sidebar Scroll Styling
|--------------------------------------------------------------------------
| Ensures the sticky sidebar doesn't overlap the header when scrolling.
*/
.toc-sidebar {
  /* Adjusting for the sticky navbar height (H-14 in our layout) */
  top: calc(theme('spacing.10') + theme('spacing.4'));
}
